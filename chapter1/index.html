<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Deterministic Motion </title>

  
  <link rel="stylesheet" type="text/css" href="/Honours-website-project/assets/cssStyle/generic.css">
  <link rel="stylesheet" href="/Honours-website-project/assets/cssStyle/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" defer></script>
  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
</head>

<body>
 
  
<h1>Chapter 1</h1>
<h1>Deterministic Motion</h1>
<hr>
<!-- Shared utility function for pausing and resuming any sketch -->
<script>  
  let pauseButtonToggle = function (button, sketch) {
    if (sketch.isLooping()) {
      button.innerText = "Play";
      sketch.noLoop();
    } else {
      button.innerText = "Pause";
      sketch.loop();
    }
  }
</script>


  <p>The aim of this chapter is to introduce the basics of 2D animation provided by the <strong>p5.js</strong> library, through examples of simple deterministic motion. This will be the foundation of motion simulation that I will be discussing for the rest of the project.</p>
<h2>1.1 Phenomena</h2>
<p>One of the most important and elementary features of life is the ability to move. Therefore it is essential for us to be able to simulate entities moving across the screen (our environment). But before simulating complex life-like motion, let us first simplify the problem to simulating simple motion - like an object moving along a straight line. This allows us to understand the modelling and implementation of simulating motion in our <strong>p5</strong> sketches (these are explained further below) and extend the ideas to any kind of motion simulation.</p>
<p>We will build our simulations in this chapter around one of the key ideas of classical mechanics - Forces. We also ask the question: how does the existence of external forces such as gravity, air resistance, drag and friction affect the motion of inanimate objects? Further, how can we define such characteristics in our virtual environment such that the resulting simulations are akin to that seen in the real physical world? These are two sides of the same coin that we will continue to explore - break down phenomena into simple pieces by coding and picking out important parameters of the phenomena from the code.</p>
<p>Viewing motion simulation in such a manner allows us to move smoothly from simple animations, i.e. motion of an object in a straight line or a stationary object, to simple but naturally occurring physical phenomena, such as a ball being dropped to the ground from some height under the influence of gravity, parabolic motion of a thrown object, etc.</p>
<p>And finally the one shown below may not be a naturally occurring phenomenon, but to justify its implementation in code, I state the following: have we all not played around with a bouncing ball - throw it at a particular angle and see what reaction we get from the ball and its interactions with the wall, floor and household objects. Therefore, it's a simple yet an informative experiment to see the influence of gravity, collision and friction on a moving object.</p>
<h2>1.2 Modeling</h2>
<p>First, in order to simulate the effect of forces on an object, we need to represent the object in our virtual environment - the screen - or the <strong>p5</strong> canvas (or just canvas). To simplify the physics - hence shortening code lengths, and to simplify the visualisation of our object, we will use a circle to represent our object and will be considered to be a point-mass object (where all the mass is concentrated at the centre)1</p>
<p>Now that we have the canvas (environment) and the circle (entity/object), we also need to represent time. This is done through redrawing on our canvas every frame.<br>
For example, let’s say we initially draw the circle at the centre of canvas, then we would erase that drawing and draw the circle again a little bit to the right, repeat this a few times moving the circle a little bit to the right each time. Now show each of these drawings one by one at a particular speed (i.e. frame rate). If the speed is fast enough and the change in position is close enough, then voilà! You have your circle moving from left to right seemingly continuous to the eye.<br>
This is precisely how animated motion pictures are made, and one can think of this as the digital analog. Note that this method of simulating motion is not something that has magically appeared, but from our intuitive understanding of motion in terms of displacement.</p>
<p>Displacement is just the change in position over time. Now, of course, in order to move to the continuous world, we would have to take limits of the change (in position) and derive the velocity <strong>at every instant</strong>, but that is impossible since the continuum is uncountable (i.e., you can never complete calculating velocity at ‘every instant’). But such instantaneous calculations are unnecessary for all practical purposes, since our brain cannot tell the difference visually between a continuous motion over 2 seconds versus many discrete steps of motion over 2 seconds<sup>2</sup>. Now, since it is in every frame that we change the position of the object, a convenient and natural <strong>unit of time is the frame rate</strong>. Similarly, since we also change the position of our object in terms of pixels<sup>3</sup>, we will consider the unit of distance to be pixels (or px). Thus any mention of value without attached units must be interpreted respectively. E.g. speed = <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span></eq> , means that we are setting the variable ‘speed’ to be <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span></eq> px/f</p>
<h3>1.2.2 Modelling of physics:</h3>
<p>The topic of physics we are engaging with - dynamics in 2 dimensions - uses both magnitude and direction to describe motion phenomena. Therefore, following suit with the usual textbook method of modelling these dual-parameter notions, we shall use vectors, since we are also already using a Cartesian plane to describe the position of entities.</p>
<p>Vectors are not only a useful tool to quantify relative position, through vector subtraction, but also a compact way of describing change. There are two ways in which we represent these vectors - Cartesian and Polar coordinates - either might be used depending on the situation and perspective required.</p>
<p>For example, if I have to move from point A to B, we first embed the positions of A and B, as vectors relative to the origin - which is already given to us in the usual Cartesian representation.<br>
Now all we have to do is find out the units along the <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq>-axis (let’s call it <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq>) and the no. of units along the y-axis is B from A (this can also be done through vector subtraction of the position vectors of A and B). Now the vector <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></eq> precisely holds the information about how far and in what direction is B from A.</p>
<p>(Intend to add a diagram, that shows how two vectors are added and subtracted)</p>
<p>Therefore, a simple vector addition of <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></eq> to the position vector A is how we will linearly move an object from A to B in one frame.<br>
But, suppose the two points A and B are much further apart, and we want to only reach B in 200 frames then we can scale down the magnitude of <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></eq> by 200 - using scalar multiplication to get <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext>’</mtext><mo separator="true">,</mo><mi>y</mi><mtext>’</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x’, y’)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">’</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">’</span><span class="mclose">)</span></span></span></span></eq>, then <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext>’</mtext><mo separator="true">,</mo><mi>y</mi><mtext>’</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x’,y’)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">’</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">’</span><span class="mclose">)</span></span></span></span></eq> is precisely the velocity vector, therefore simply by adding <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mtext>’</mtext><mo separator="true">,</mo><mi>y</mi><mtext>’</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x’,y’)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">’</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">’</span><span class="mclose">)</span></span></span></span></eq> to the current position vector at each frame - and setting the resultant vector as the new position vector for the next frame - we can produce a simulation / animation of an object moving from A to B along a straight line.</p>
<p>Similarly, any other quantity in motion phenomena that has both magnitude and direction will also be represented through vectors in our simulations.<br>
This also allows manipulation and interaction of these different quantities - force (Gravitation, friction), acceleration, velocity, position through the means of vector addition, subtraction and scalar multiplication as follows:</p>
<p>In one frame (1 unit of time) given that our object is at current position, current velocity</p>
<ol>
<li>
<p>Suppose we have external forces <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>f</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">f_1, f_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>, then by the second law of motion, we have:<br>
acceleration = (<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo>+</mo><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">f_1 + f_2) / m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">m</span></span></span></span></eq> = sum of external forces / mass</p>
</li>
<li>
<p>(New Velocity - Current velocity) / time = acceleration, which implies<br>
New velocity = Current velocity + Acceleration</p>
</li>
<li>
<p>Similarly, New position = Current position + new velocity</p>
</li>
<li>
<p>Draw our next frame with the object in New position, and repeat from 1. unless explicitly stopped</p>
</li>
</ol>
<p>The above method is commonly known as Euler Integration, although it is not the most accurate method that is used for describing continuous motion, it is good enough for the motion phenomena that were simulated for the project. This is mostly because our major requirements are smoothness - visually, and easy implementation - computationally.<br>
It is likely that the above conditions are met because the change in quantities over each frame is relatively small, the errors - and hence the departure from real-life behaviour is visually minimal.</p>
<p>(Intend to add a picture that shows difference between curve that results from Euler-integration and the actual integral curve - and see what happens when step size is small)</p>
<p>Therefore, the above sequence works as a model of simulating dynamics of physical objects - with an explicit usage of the 2<sup>nd</sup> law, and an implicit use of the 1<sup>st</sup> law of motion - where an object’s velocity will not change unless an external force acts on it.</p>
<p>The choice of using forces active in every frame to compute a new position for the next frame, allows us to model multiple kinds of forces, within the same structure (the loop). Eg: constant forces in the environment - gravity, changing forces in simulation - wind force, activated forces under condition - friction, buoyancy.</p>
<h2>1.3 Implementation</h2>
<h3>1.3.1: Moving object along a straight line</h3>
<p>To draw a circle at the position <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></eq> with diameter d on our canvas, we use the built-in <strong>p5</strong> function <code>circle(x, y, d)</code></p>
<pre><code>function setup(){  
    createCanvas( windowWidth, windowHeight );  
    background( 225 );  
    circle(10, 250, 50);  
}
</code></pre>
<p>Now to move the circle from the centre of the screen (width/2 height/2) to say 400 px to the right then we write the following code</p>
<pre tabindex="0" class="code-block"><code class="language-js"><span class="token keyword">let</span> x_coord
<span class="token keyword">let</span> y_coord 
<span class="token keyword">let</span> timeTaken
<span class="token keyword">let</span> speed

<span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">createCanvas</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">background</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  x_coord <span class="token operator">=</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
  y_coord <span class="token operator">=</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token comment">// Change the time taken here (in #frames), to see how it affects the animation</span>
  <span class="token comment">// Note that this implementation is not used in our simulation below</span>
  <span class="token comment">// This is just to show other ways of input that is possible</span>
  timeTaken <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">"Enter the time taken (in px) for the circle to move"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  speed <span class="token operator">=</span> <span class="token number">400</span><span class="token operator">/</span>timeTaken

  <span class="token function">circle</span><span class="token punctuation">(</span>x_coord<span class="token punctuation">,</span> y_coord<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// If condition used here to stop the draw loop() after we have arrived at our destination</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x_coord <span class="token operator">&lt;=</span> width<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">background</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Since we are only moving along x-axis, we can ignore the y-coordinate</span>
    x_coord <span class="token operator">+=</span> speed<span class="token punctuation">;</span>
    <span class="token comment">// If we want to move to a location that is not along either axis relative to initial position</span>
    <span class="token comment">// Then we would have to calculate the slope of the line joining the locations and</span>
    <span class="token comment">// use that to manipulate the y-coord i.e., </span>
    <span class="token comment">// y_coord += slope * speed;   [where slope = change in y / change in x]</span>

    <span class="token function">circle</span><span class="token punctuation">(</span>x_coord<span class="token punctuation">,</span> y_coord<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// `noLoop()` will stop the draw loop</span>
  <span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token function">noLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<div class="simulation-container">
  <div id="sec1" class="interactive-sketch"></div>
  <div id="interactive-controls-sec1" class="interactive-panel"></div>
  <div class="control-buttons">
    <button onclick="pauseButtonToggle(this, sec1Sketch);">Play</button> 
    <button onclick="sec1Sketch.initializeSketch();">Reset</button>
  </div>
</div>

  <h3>1.3.2 Vector implementation:</h3>
<p>To create a of vector object (which is called <strong>p5.Vector</strong> internally in <strong>p5</strong>) we use:<br>
let vec = <code>createVector(30, 200)</code><br>
Thus vec represents the position vector pointing from the origin to <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>30</mn><mo separator="true">,</mo><mn>200</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(30, 200)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">30</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">200</span><span class="mclose">)</span></span></span></span></eq></p>
<p><em>Basic Vector operations:</em><br>
Where <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">v_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>, <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq> are vectors and a is a real number</p>
<ul>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>+</mo><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_1 + v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq> : <code>v1.add(v2)</code></li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>−</mo><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_1 - v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>  : <code>v1.sub(v2)</code></li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><msub><mi>v</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">a*v_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq> : <code> v1.mult(a)</code></li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>a</mi><mo>∗</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1/a * (v_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></eq> : <code>v1.div(a)</code></li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi>v</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">||v_1||</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣∣</span></span></span></span></eq> : <code>v_1.mag()</code></li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi>v</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">(v_1) / ||v_1||</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/∣∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣∣</span></span></span></span></eq> : <code>v1.normalise() </code></li>
<li>Random vector from unit circle - <code> p5.Vector.random2D()</code></li>
</ul>
<p>Note that in <code>v1.function()</code> , <code>function()</code> is called as a method of the class. Any name that appears as <code>v1.name</code> is a property of the class that <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">v_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq> represents, the ‘ . ’ allows us to access those properties - thus we are able to call methods like <code>add()</code> since they belong to the <code>p5.Vector</code> class. To view all the methods please check the <a href="https://p5js.org/reference/p5/p5.Vector/">p5 reference</a>.</p>
<h3>1.3.3 Physical entities and classes:</h3>
<p>We will implement physical entities (i.e., laws of physics obeying objects)  with the help of a Mover class - Classes are how we define a new type of object in <strong>js</strong> and give it structure - with its own properties and functions.</p>
<p>Below is an example of how the class is implemented, where we are trying to simulate a ball, bouncing around in an enclosed space. Parameters and characteristics of the simulation are:</p>
<ol>
<li>Canvas size - <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>500</mn><mo>×</mo><mn>400</mn></mrow><annotation encoding="application/x-tex">500 \times 400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">500</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">400</span></span></span></span></eq> - chose so that the ball may hit the edges more often</li>
<li>Initial velocity = <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>3</mn><mo separator="true">,</mo><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(3, -2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></eq> px/f -roughly simulates just tossing a ball towards a wall</li>
<li>Collision with walls, floor - inelastic in nature</li>
</ol>
<p>The constants - friction coefficient, gravitational acceleration, percentage of energy lost in after wall-collision are all chosen after experimentation with the visualisation produced by each of these quantities.<br>
The mass of the object is an arbitrary quantity - only there to determine the size of the object and scaling of gravitational force. Note that we increase the gravitational force for heavier objects, in order to simulate what we see in usual environments - heavier objects fall faster relative to lighter ones (although this isn’t because of gravitation but rather other external forces like air resistance).</p>
<p>This is the basic structure of our class:</p>
<pre tabindex="0" class="code-block"><code class="language-js"><span class="token comment">// Program to simulate a bouncing ball under the influence of gravity and frictional forces</span>
<span class="token keyword">class</span> <span class="token class-name">Mover</span> <span class="token punctuation">{</span>
  <span class="token comment">/* This is the syntax for creating a class, now within this block 
  we can define and attach properties and functions (methods) to the class
  by using the 'this' keyword */</span>

  <span class="token comment">// The constructor sets the initial values that are required after instantiation</span>
  <span class="token comment">// for the Mover class we require, x and y coordinates, and mass of the object</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The velocity chosen such that it showcases all the features of the program</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token function">createVector</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vel <span class="token operator">=</span> <span class="token function">createVector</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>acc <span class="token operator">=</span> <span class="token function">createVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Creates a vector of default values (0,0)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mass <span class="token operator">=</span> m<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> m <span class="token operator">*</span> <span class="token number">0.875</span><span class="token punctuation">;</span>   <span class="token comment">// Object radius ∝ mass - i.e., assuming bigger ⇒ heavier</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// Diameter - used as argument for drawing circle</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Inside classes, function/methods don't need the 'function' keyword,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The below three lines implement the physical laws as sequenced in the modelling section</span>
    <span class="token comment">// This implementation will be used throughout all simulations as part of the update() method</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>acc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>acc<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//Acceleration is reset - only affected by force(s) at that frame</span>

    <span class="token comment">// bounceEdges() is called after the reset, since the effect of friction</span>
    <span class="token comment">// applied in bounceEdges() is only used in the next frame </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bounceEdges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">circle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">applyForce</span><span class="token punctuation">(</span><span class="token parameter">force</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Since gravitational acceleration is constant, we have to create a copy</span>
    <span class="token comment">// And apply second law to the copied vector</span>
    <span class="token keyword">let</span> f <span class="token operator">=</span> p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span>force<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">bounceEdges</span><span class="token punctuation">(</span><span class="token parameter">fric_Force <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">></span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>y <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.85</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+=</span> height <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>fric_Force<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Formula used is fric = µN (-û) where </span>
        <span class="token comment">// µ - frictional coeffecient, N- Normal force, û - unit vector along current velocity </span>
        <span class="token comment">// Basically friction is a force acting along the opposite direction of the velocity</span>

        <span class="token keyword">let</span> fric <span class="token operator">=</span> p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">setMag</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">,</span> fric_coeff<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        fric<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">applyForce</span><span class="token punctuation">(</span>fric<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>y <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.85</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">></span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>x <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.95</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> width <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>x <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.95</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> mv<span class="token punctuation">;</span>   <span class="token comment">// The mover instance decleration</span>
<span class="token keyword">let</span> gravity<span class="token punctuation">;</span>
<span class="token keyword">const</span> fric_coeff <span class="token operator">=</span> <span class="token number">0.075</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  gravity <span class="token operator">=</span> <span class="token function">createVector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mover</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">background</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mv<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Applying any universal forces in the simulation - in this case just gravity</span>
  <span class="token comment">// But since grativational force actually scales according to mass, we pass a new vector at each frame</span>
  <span class="token comment">// i.e., our constant gravity vector multiplied by the mass of the mover</span>
  mv<span class="token punctuation">.</span><span class="token function">applyForce</span><span class="token punctuation">(</span>p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span>gravity<span class="token punctuation">,</span> mv<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  mv<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<p>This structure serves as a template for any kind of moving object - a method to display our mover, a method to update its position - using the 2<sup>nd</sup> law, and other methods that take care of detecting and processing forces.</p>
<p>This is how an instance of the object is made and used in our sketches:</p>
<pre tabindex="0" class="code-block"><code class="language-js"><span class="token keyword">let</span> mv<span class="token punctuation">;</span>   <span class="token comment">// The mover instance decleration</span>
<span class="token keyword">let</span> gravity<span class="token punctuation">;</span>
<span class="token keyword">const</span> fric_coeff <span class="token operator">=</span> <span class="token number">0.075</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  gravity <span class="token operator">=</span> <span class="token function">createVector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mover</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">background</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mv<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Applying any universal forces in the simulation - in this case just gravity</span>
  <span class="token comment">// But since grativational force actually scales according to mass, we pass a new vector at each frame</span>
  <span class="token comment">// i.e., our constant gravity vector multiplied by the mass of the mover</span>
  mv<span class="token punctuation">.</span><span class="token function">applyForce</span><span class="token punctuation">(</span>p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span>gravity<span class="token punctuation">,</span> mv<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  mv<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
<p>Where <code>mv = new Mover(200, 80, 20)</code> is the syntax to create an object of type Mover and <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>200</mn></mrow><annotation encoding="application/x-tex">x = 200</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">200</span></span></span></span></eq>, <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>80</mn></mrow><annotation encoding="application/x-tex">y = 80</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">80</span></span></span></span></eq> and mass <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">= 20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">20</span></span></span></span></eq> is passed to the constructor, which then creates all the initial required values.</p>
<p>Now the main method, that takes care of processing forces - is applyForce()</p>
<pre tabindex="0" class="code-block"><code class="language-js">  <span class="token function">applyForce</span><span class="token punctuation">(</span><span class="token parameter">force</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Since gravitational acceleration is constant, we have to create a copy</span>
    <span class="token comment">// And apply second law to the copied vector</span>
    <span class="token keyword">let</span> f <span class="token operator">=</span> p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span>force<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>acc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre>
<p>Here <code>p5.Vector.div()</code> is a static method. Static methods are used when we want to return a new instance of the Class using an already existing instance (here f is used) over manipulating property values of that particular instance ( then we will use <code>f.div()</code> ).</p>
<p>The secondary method of our Mover class is the <code>bounceEdges()</code> method. It checks if at the next frame or the updated position before displaying is beyond the edges of the screen. If so, it repositions the object right at the edge, and reduces the velocity to simulate a inelastic collision</p>
<pre tabindex="0" class="code-block"><code class="language-js">  <span class="token comment">// Implementation of above logic</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">></span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>x <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.95</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+=</span> width <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>x <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.95</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>and if the edge is the lower one (floor) then, we also inform my Mover, that frictional force must also be added, along with the other forces in the next frame through <code>this.applyForce(fric)</code>.<sup>4</sup></p>
<pre tabindex="0" class="code-block"><code class="language-js"><span class="token function">bounceEdges</span><span class="token punctuation">(</span><span class="token parameter">fric_Force <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
  code from prev block goes here
  ...
  */</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">></span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">.</span>y <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">0.85</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+=</span> height <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>fric_Force<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Formula used is fric = µN (-û) where </span>
      <span class="token comment">// µ - frictional coeffecient, N- Normal force, û - unit vector along current velocity </span>
      <span class="token comment">// Basically friction is a force acting along the opposite direction of the velocity</span>

      <span class="token keyword">let</span> fric <span class="token operator">=</span> p5<span class="token punctuation">.</span>Vector<span class="token punctuation">.</span><span class="token function">setMag</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vel<span class="token punctuation">,</span> fric_coeff<span class="token punctuation">)</span><span class="token punctuation">;</span> 
      fric<span class="token punctuation">.</span><span class="token function">mult</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">applyForce</span><span class="token punctuation">(</span>fric<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>In the above snippet, similar to <code>p5.Vector.div()</code>, here <code>p5.Vector.setMag(this.vel, fric_coeff)</code> - takes the the velocity of our object, and scales the magnitude to be fric_coeff.</p>
<p>Putting it together we get this :)</p>
<div class="simulation-container">
  <div id="sec2" class="interactive-sketch"></div>
  <div id="interactive-controls-sec2" class="interactive-panel"></div>
  <div class="control-buttons">
    <button onclick="pauseButtonToggle(this, sec2Sketch);">Play</button> 
    <button onclick="sec2Sketch.initializeSketch();">Reset</button>
  </div>
</div>
<h2>Notes:</h2>
<ol>
<li>
<p>Using a circle would also simplify calculations to do with contact - enables us to ignore surface area in calculations we do.</p>
</li>
<li>
<p>Although the scope of the nuances behind this claim is beyond this thesis, according to the current knowledge of visual processing, the information of shape, depth, colour and motion are handled separately and finally seen as an image to us. The speed at which this information can be processed therefore limits the ability to distinguish between two still images and one continuous motion. And this line seems to be drawn at around 10 to 12 images per second (i.e. 10-12 fps).<br>
But the kind of motion we see depends on intensity and frequency of sustained light and length of darkness</p>
<p>This is one of the numerous tricks that simulation uses - where the fundamental limits of ourselves help in decreasing required precision and therefore reducing computational overheads whenever possible. One can think of this as also discovering the required parameters of our simulation so that we can simulate real life-like motion to the extent needed. One more technique that makes use of the limits of our eye is anti-aliasing - allows us to define and use real coordinates in a discrete world</p>
</li>
<li>
<p>Note that pixels in various contexts mean different things, but CSS sets a standard definition of relative pixel dimensions, which is used in <strong>JS</strong> and hence <strong>p5.js</strong> as well. Relative means that - if object travels 5 px/frame - regardless of absolute pixel resolution of two different monitors - it will cross a canvas of width 400 px in 80 frames</p>
</li>
<li>
<p>Multiple other implementation orders were tried, but this is the one that with simplest, small code and the one that makes sure friction is only applied once when the ball is close to the ground</p>
</li>
</ol>



<!-- Auto-load section scripts -->

  <script src="/Honours-website-project/assets/scripts/chap1_01.js"></script>

  <script src="/Honours-website-project/assets/scripts/chap1_02.js"></script>


  <nav class="chapter-navigation">
    <div class="prev-container">
    
      <a href="/Honours-website-project/chapter0/" class="prev-link">
        <span class="nav-arrow">←</span> Previous
      </a>
    
  </div>
  
  <div class="home-container">
    <a href="/Honours-website-project/" class="home-link">
      <span class="nav-icon">⌂</span> Home
    </a>
  </div>
  
  <div class="next-container">
    
      <a href="/Honours-website-project/chapter2/" class="next-link">
        Next <span class="nav-arrow">→</span>
      </a>
    
  </div>
  </nav>

</body>
</html>